<ion-header [translucent]="true">
  <ion-toolbar color="tertiary">
    <ion-buttons slot="start" color="dark">
      <ion-button (click)="goBack()" color="dark">
        <ion-icon slot="icon-only" name="arrow-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title color="dark"> Past Appointments </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-segment (ionChange)="getApps()" [(ngModel)]="currentView">
    <ion-segment-button value="0">
      <ion-label>Past</ion-label>
    </ion-segment-button>
    <ion-segment-button value="1">
      <ion-label>Current/Future</ion-label>
    </ion-segment-button>
  </ion-segment>
  <ion-list>
    <ion-item *ngFor="let app of appointments">
      <ion-thumbnail slot="start">
        <img [src]="app.client | clientByID:'img'" *ngIf="!app.pet.image" />
        <img [src]="app.pet.image" *ngIf="app.pet.image" />
      </ion-thumbnail>
      <ion-label>
        <h3>{{app.client | clientByID}} - {{app.date | date: 'shortTime'}}
        </h3>
        <h5 *ngIf="app.pet.name">For {{app.pet.name}}</h5>
        <h5 *ngIf="!app.pet.name">For {{app.pet}}</h5>
        <span *ngIf="app.service">
          <p>{{app.service | service}} - {{app.service | service:'price'}} - {{app.service | service:'timeEstimate'}}
          </p>
          <p>{{app.date | date: 'mediumDate'}}</p>
        </span>
      </ion-label>
      <ion-chip [ngStyle]="{'background': client.color}" style="font-size: 11px" (click)="bookAgain(app)">
        <ion-label color="dark">Rebook</ion-label>
      </ion-chip>
    </ion-item>
  </ion-list>
</ion-content>